<!-- Contenedor Principal -->
<div class="container-fluid p-0">
  <!-- Header -->
  <header class="bg-dark text-white py-2 sticky-sm-top">
      <div class="d-flex justify-content-between align-items-center px-3">
          <img src="/images/logo-minus-2.png" alt="Logo" class="logo-header">
          <div> Welcome  {{ userName }}</div>
          <div class="d-flex align-items-center">
              <!-- Ícono Carrito -->
              <div id="cart-icon" class="position-relative me-3" *ngIf="isSellerOrAdmin()">
                  <svg fill="#ffffff" height="38px" width="38px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 472.615 472.615">
                      <g>
                          <polygon points="454.452,229.524 432.159,291.15 74.389,291.15 74.389,23.975 0,23.975 0,43.289 55.074,43.289 55.074,310.463 445.701,310.463 472.615,236.098"></polygon>
                      </g>
                      <circle cx="329.511" cy="398.454" r="50.186"></circle>
                      <circle cx="142.513" cy="398.454" r="50.186"></circle>
                  </svg>
                  <a href="#" routerLink="/cart"><span id="cart-count" class="cart-count-custom-header">{{ cartCount }}</span></a>
              </div >
              <a href="#" (click)="logout()">
                <!-- Ícono Logout -->
                <svg width="35px" height="35px" viewBox="-3.2 -3.2 22.40 22.40" xmlns="http://www.w3.org/2000/svg" fill="#FFFFFF" stroke="#FFFFFF" stroke-width="0.00016">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <g fill="#FFFFFF">
                            <path d="m 13 5 v 0.003906 c 0.265625 0 0.519531 0.105469 0.707031 0.289063 l 2 2 c 0.390625 0.390625 0.390625 1.023437 0 1.414062 l -2 2 c -0.1875 0.183594 -0.441406 0.289063 -0.707031 0.285157 v 0.007812 h -1 v -2 h -5 c -0.550781 0 -1 -0.449219 -1 -1 s 0.449219 -1 1 -1 h 5 v -2 z m 0 0"></path>
                            <path d="m 9.179688 1.097656 c -2.394532 -0.40625 -4.910157 0.453125 -6.546876 2.398438 c -2.175781 2.597656 -2.175781 6.40625 0 9 c 2.179688 2.597656 5.929688 3.257812 8.863282 1.5625 c 0.230468 -0.132813 0.398437 -0.351563 0.46875 -0.605469 c 0.066406 -0.257813 0.03125 -0.53125 -0.101563 -0.761719 c -0.277343 -0.476562 -0.886719 -0.640625 -1.367187 -0.363281 c -2.105469 1.214844 -4.765625 0.75 -6.328125 -1.117187 c -1.5625 -1.863282 -1.5625 -4.5625 0 -6.429688 c 1.5625 -1.863281 4.222656 -2.332031 6.328125 -1.113281 c 0.480468 0.273437 1.089844 0.113281 1.367187 -0.367188 c 0.132813 -0.226562 0.167969 -0.5 0.101563 -0.757812 c -0.070313 -0.257813 -0.238282 -0.476563 -0.46875 -0.609375 c -0.730469 -0.421875 -1.515625 -0.699219 -2.316406 -0.835938 z m 0 0"></path>
                        </g>
                    </g>
                </svg>
              </a>
          </div>
      </div>
  </header>

  <!-- Contenedor de la Grid -->
  <div class="d-grid" id="aside-div" >
      <!-- Aside -->
      
          <!-- Aside -->
          <aside class="bg-light border-end w-75">..
              <!-- Botón Menú Hamburguesa -->
              <button class="btn btn-light d-md-none mt-3" type="button" data-bs-toggle="collapse" data-bs-target="#asideMenu" aria-expanded="false" aria-controls="asideMenu">
                  <svg width="30" height="30" fill="currentColor" class="bi bi-list">
                      <path fill-rule="evenodd" d="M3.5 12.5a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5zm0-5a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5zm0-5a.5.5 0 0 1 .5-.5H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.5-.5z"/>
                  </svg>
              </button>
              <!-- Menú Items -->
              <div id="asideMenu" class="collapse d-md-block">
                  <div class="d-flex flex-column py-4 px-3 mt-4 ">
                      <a href="" class="d-flex align-items-center text-decoration-none text-dark py-3 mb-2">
                          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-house-fill me-3" viewBox="0 0 16 16">
                              <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/>
                              <path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"/>
                          </svg>
                         <span >Home</span> 
                      </a>
                      <a href="#" class="d-flex align-items-center text-decoration-none text-dark py-3 mb-2">
                          <svg version="1.1" id="_x32_" class="me-2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25px" height="25px" viewBox="0 0 512 512" xml:space="preserve" fill="#000000">
                              <path d="M429.75,56.692c-5.641-4-12.891-5.031-19.422-2.734l-242.875,85c-30.625-1.453-51.484-9.844-65.859-19.203 c-4.328-2.813-5.266-4.469-5.266-4.469c-2.594-2.594-3.594-6.188-2.859-9.891c0.75-3.703,3.391-6.734,6.953-7.984l217.359-76.063 c3.266-1.156,6.891-0.641,9.703,1.359c0.25,0.188,0.469,0.438,0.703,0.625l15.906-5.75c-0.984-5.453-3.938-10.391-8.547-13.641 c-5.641-4.016-12.891-5.031-19.422-2.75l-228.578,80c-8.563,3-14.297,11.094-14.297,20.156v5.578v352.312 c0,0,15.063,49,94.203,52.766l242.688-84.938c17.125-6,28.609-22.171,28.609-40.328V74.114 C438.75,67.192,435.391,60.692,429.75,56.692z"></path>
                          </svg>
                          Sales History
                      </a>
                      <a href="#" routerLink="/cart"class="d-flex align-items-center text-decoration-none text-dark py-3 mb-2">
                          <svg width="30px" height="30px" class="me-2" viewBox="0 0 24 24" fill="none" 
                          xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M2.08416 2.7512C2.22155 2.36044 2.6497 2.15503 3.04047 2.29242L3.34187 2.39838C3.95839 2.61511 4.48203 2.79919 4.89411 3.00139C5.33474 3.21759 5.71259 3.48393 5.99677 3.89979C6.27875 4.31243 6.39517 4.76515 6.4489 5.26153C6.47295 5.48373 6.48564 5.72967 6.49233 6H17.1305C18.8155 6 20.3323 6 20.7762 6.57708C21.2202 7.15417 21.0466 8.02369 20.6995 9.76275L20.1997 12.1875C19.8846 13.7164 19.727 14.4808 19.1753 14.9304C18.6236 15.38 17.8431 15.38 16.2821 15.38H10.9792C8.19028 15.38 6.79583 15.38 5.92943 14.4662C5.06302 13.5523 4.99979 12.5816 4.99979 9.64L4.99979 7.03832C4.99979 6.29837 4.99877 5.80316 4.95761 5.42295C4.91828 5.0596 4.84858 4.87818 4.75832 4.74609C4.67026 4.61723 4.53659 4.4968 4.23336 4.34802C3.91052 4.18961 3.47177 4.03406 2.80416 3.79934L2.54295 3.7075C2.15218 3.57012 1.94678 3.14197 2.08416 2.7512Z" fill="#1C274C"></path> <path d="M7.5 18C8.32843 18 9 18.6716 9 19.5C9 20.3284 8.32843 21 7.5 21C6.67157 21 6 20.3284 6 19.5C6 18.6716 6.67157 18 7.5 18Z" fill="#1C274C"></path> <path d="M16.5 18.0001C17.3284 18.0001 18 18.6716 18 19.5001C18 20.3285 17.3284 21.0001 16.5 21.0001C15.6716 21.0001 15 20.3285 15 19.5001C15 18.6716 15.6716 18.0001 16.5 18.0001Z" 
                              fill="#1C274C"></path> </g></svg>
                          Goto Cart
                      </a>

                      <a *ngIf="isAdmin()" href="#" class="d-flex align-items-center text-decoration-none text-dark py-3 mb-2">
                          <svg width="35px" height="35px" class="me-2" viewBox="0 0 512 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <title>barchart</title> <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="add" fill="#000000" transform="translate(42.666667, 85.333333)"> <path d="M21.3333333,1.42108547e-14 L85.3333333,1.42108547e-14 L85.3333333,277.333333 L21.3333333,277.333333 L21.3333333,1.42108547e-14 Z M128,128 L192,128 L192,277.333333 L128,277.333333 L128,128 Z M341.333333,85.3333333 L405.333333,85.3333333 L405.333333,277.333333 L341.333333,277.333333 L341.333333,85.3333333 Z M234.666667,42.6666667 L298.666667,42.6666667 L298.666667,277.333333 L234.666667,277.333333 L234.666667,42.6666667 Z M3.55271368e-14,298.666667 L426.666667,298.666667 L426.666667,341.333333 L3.55271368e-14,341.333333 L3.55271368e-14,298.666667 Z"
                               id="Combined-Shape"> </path> </g> </g> </g></svg>
                          Stock
                      </a>

                  </div>
              </div>
          </aside>
     
      

      <!-- Tabla -->
      <main>
        <div class="p-4 d-flex justify-content-center mt-5 tabla-main">
          <table class="table table-light table-striped table-hover table-responsive-sm w-75 ">
            <thead class=" text-center ">
              <tr>
                <th scope="col-5">Name</th>
                <th scope="col-2">Price</th>
                <th scope="col-2">Stock</th>
                <th scope="col-3" *ngIf="isSellerOrAdmin()">Add to Cart</th>
              </tr>
            </thead>
            <tbody class="text-center table-group-divider">
              <tr *ngFor="let item of (displayCartProducts ? cartProducts : products)">
                <td>{{ item.name }}</td>
                <td>{{ item.price }}</td>
                <td>{{ item.stock }}</td>

                <!-- TD que relaciona el Add cart-->
                <td class="text-center" *ngIf="isSellerOrAdmin()">
                  <div class="d-flex justify-content-center align-items-center">
                    <!-- Botón + -->
                    <button class="btn btn-sm boton-td-green"  (click)="incrementQuantity(item.id)">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                        <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4" />
                      </svg>
                    </button>
                    <!-- Botón - -->
                    <button class="btn btn-sm boton-td-red me-2"  (click)="decrementQuantity(item.id)">
                      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-dash-circle" viewBox="0 0 16 16">
                        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                        <path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8" />
                      </svg>
                    </button>
                    <!-- Cantidad -->
                    <span>{{ quantities[item.id][1] }}</span>
                  </div>
                </td>
              </tr>
            </tbody>
            <tfoot *ngIf="isSellerOrAdmin()">
                <tr class="table-success">
                  <td colspan="1" class="text-center"><strong>Total:</strong></td>
                  <td colspan="1" class="text-center">{{ calculateTotal()| currency }}</td>
                  <td colspan="1" class="text-center"></td>
                  <td class="text-center">
                    <button class="btn btn-danger" (click)="resetCart()">Reset</button>
                  </td>
                </tr>
              </tfoot>
              
          </table>
        </div>
      </main>
      
      
  </div>
</div>